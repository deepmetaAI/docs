export const metadata = {
  title: 'Jimeng 视频生成',
  description: 'OmniMaaS Jimeng（即梦）视频生成接口，支持文生视频和图生视频。',
}

# Jimeng（即梦）视频生成

OmniMaaS 目前已支持对 Jimeng（即梦）视频大模型的统一接入与调用。通过本章节提供的接口说明，您可以在同一套 API 下发起视频生成请求，调用 Jimeng 视频生成接口生成视频。{{ className: 'lead' }}

---

## 文生视频

<Row>
  <Col>
    <Endpoint method="POST" path="https://api.omnimaas.com/v1/video/generations" />

    ### 请求头

    <Properties>
      <Property name="Authorization" type="string" required>
        Bearer Token，格式：`Bearer YOUR_API_KEY`
      </Property>
      <Property name="Content-Type" type="string" required>
        请求体格式，固定为 `application/json`
      </Property>
    </Properties>

    ### 请求参数

    <Properties>
      <Property name="model" type="string" required>
        `doubao-seedance-1-0-pro-250528`、`doubao-seedance-1-0-pro-fast-251015`
      </Property>
      <Property name="prompt" type="string" required>
        文本提示词，生成视频的文本描述
      </Property>
      <Property name="duration" type="integer">
        视频时长参数（秒），可选值：doubao-seedance-1-5-pro：4~12 秒、10，doubao-seedance-1-0-pro、doubao-seedance-1-0-pro-fast、doubao-seedance-1-0-lite-t2v、doubao-seedance-1-0-lite-i2v：2~12 秒，默认 `5`
      </Property>
      <Property name="resolution" type="string">
        分辨率参数，输出分辨率，默认 `720p`
        <Options>
          <Option value="480p" />
          <Option value="720p" />
          <Option value="1080p" />
        </Options>
      </Property>
      <Property name="size" type="string">
        各画面比例的宽高像素值，默认 `16:9`（doubao-seedance-1-0-pro、doubao-seedance-1-0-pro-fast 文生视频场景不支持 adaptive）
        <Options>
          <Option value="16:9" />
          <Option value="1:1" />
          <Option value="4:3" />
          <Option value="9:16" />
          <Option value="3:4" />
          <Option value="21:9" />
          <Option value="adaptive" />
        </Options>
      </Property>
      <Property name="metadata" type="object">
        扩展参数（JSON 字符串格式）
      </Property>
    </Properties>

    ### metadata 参数说明

    metadata 支持 `seed`（种子整数）、`camera_fixed`（是否固定摄像头）、`watermark`（是否包含水印）。
  </Col>
  <Col sticky>
    <CodeGroup tag="POST" label="/v1/video/generations">

```bash {{ title: 'cURL' }}
curl -X POST https://api.omnimaas.com/v1/video/generations \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "doubao-seedance-1-0-pro-250528",
    "prompt": "一只可爱的小猫在草地上玩耍",
    "duration": 5,
    "resolution": "720p"
  }'
```

```python {{ title: 'Python' }}
import requests

url = 'https://api.omnimaas.com/v1/video/generations'

headers = {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer YOUR_API_KEY'
}

data = {
    "model": "doubao-seedance-1-0-pro-250528",
    "prompt": "夕阳下的海滩，海浪轻轻拍打着沙滩"
}

response = requests.post(url, headers=headers, json=data)
result = response.json()
print(f"任务ID: {result['id']}")
print(f"状态: {result['status']}")
```

```go {{ title: 'Go' }}
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io"
    "net/http"
)

type VideoRequest struct {
    Model  string `json:"model"`
    Prompt string `json:"prompt"`
}

func main() {
    reqBody := VideoRequest{
        Model:  "doubao-seedance-1-0-pro-250528",
        Prompt: "夕阳下的海滩，海浪轻轻拍打着沙滩",
    }

    jsonData, _ := json.Marshal(reqBody)
    req, _ := http.NewRequest("POST",
        "https://api.omnimaas.com/v1/video/generations",
        bytes.NewBuffer(jsonData))
    req.Header.Set("Content-Type", "application/json")
    req.Header.Set("Authorization", "Bearer YOUR_API_KEY")

    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()

    body, _ := io.ReadAll(resp.Body)
    fmt.Println(string(body))
}
```

```javascript {{ title: 'Node.js' }}
const axios = require('axios');

const url = 'https://api.omnimaas.com/v1/video/generations';

const headers = {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer YOUR_API_KEY'
};

const data = {
    model: 'doubao-seedance-1-0-pro-250528',
    prompt: '夕阳下的海滩，海浪轻轻拍打着沙滩'
};

axios.post(url, data, { headers })
    .then(response => {
        console.log('任务ID:', response.data.id);
        console.log('状态:', response.data.status);
    })
    .catch(error => {
        console.error('请求失败:', error.message);
    });
```

    </CodeGroup>
  </Col>
</Row>

---

## 图生视频

<Row>
  <Col>
    <Endpoint method="POST" path="https://api.omnimaas.com/v1/video/generations" />

    ### 请求头

    <Properties>
      <Property name="Authorization" type="string" required>
        Bearer Token，格式：`Bearer YOUR_API_KEY`
      </Property>
      <Property name="Content-Type" type="string" required>
        请求体格式，固定为 `application/json`
      </Property>
    </Properties>

    ### 请求参数

    <Properties>
      <Property name="model" type="string" required>
        `doubao-seedance-1-0-pro-250528`、`doubao-seedance-1-0-pro-fast-251015`、`doubao-seedance-1-0-lite-i2v-250428`、`doubao-seedance-1-0-lite-t2v-250428`
      </Property>
      <Property name="prompt" type="string" required>
        文本提示词，生成视频的文本描述
      </Property>
      <Property name="images" type="array" required>
        图片输入（URL/Base64），支持输入一张或多张图片
      </Property>
      <Property name="duration" type="integer">
        视频时长参数（秒），可选值：doubao-seedance-1-5-pro：4~12 秒、10，doubao-seedance-1-0-pro、doubao-seedance-1-0-pro-fast、doubao-seedance-1-0-lite-t2v、doubao-seedance-1-0-lite-i2v：2~12 秒，默认 `5`
      </Property>
      <Property name="resolution" type="string">
        分辨率参数，输出分辨率，默认 `720p`
        <Options>
          <Option value="480p" />
          <Option value="720p" />
          <Option value="1080p" />
        </Options>
      </Property>
      <Property name="size" type="string">
        各画面比例的宽高像素值，默认 `16:9`（doubao-seedance-1-0-pro、doubao-seedance-1-0-pro-fast 文生视频场景不支持 adaptive）
        <Options>
          <Option value="16:9" />
          <Option value="1:1" />
          <Option value="4:3" />
          <Option value="9:16" />
          <Option value="3:4" />
          <Option value="21:9" />
          <Option value="adaptive" />
        </Options>
      </Property>
      <Property name="metadata" type="object">
        扩展参数（JSON 字符串格式）
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup tag="POST" label="/v1/video/generations">

```bash {{ title: 'cURL' }}
curl -X POST https://api.omnimaas.com/v1/video/generations \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "doubao-seedance-1-0-pro-250528",
    "prompt": "让这张图片动起来，添加自然的运动效果",
    "images": ["https://ark-project.tos-cn-beijing.volces.com/doc_image/i2v_foxrgirl.png"],
    "duration": 5
  }'
```

    </CodeGroup>
  </Col>
</Row>

---

## 响应

<Row>
  <Col>
    ### 响应参数

    <Properties>
      <Property name="id" type="string">
        视频任务 ID
      </Property>
      <Property name="task_id" type="string">
        视频任务 ID，可取 id 或 task_id
      </Property>
      <Property name="object" type="string">
        对象类型，固定为 `video`
      </Property>
      <Property name="model" type="string">
        使用的模型名称
      </Property>
      <Property name="created_at" type="integer">
        创建时间戳
      </Property>
      <Property name="status" type="string">
        任务状态（processing: 处理中）
      </Property>
      <Property name="progress" type="integer">
        生成进度百分比
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup title="响应示例">

```json {{ title: '响应' }}
{
  "id": "cgt-xxx",
  "task_id": "cgt-xxx",
  "object": "video",
  "model": "doubao-seedance-1-0-pro-250528",
  "created_at": 1640995200,
  "status": "queued",
  "progress": 0
}
```

    </CodeGroup>
  </Col>
</Row>

---

## 查询视频

根据任务 ID 查询视频生成任务的状态和结果

<Row>
  <Col>
    <Endpoint method="GET" path="https://api.omnimaas.com/v1/video/generations/{task_id}" />

    ### 请求头

    <Properties>
      <Property name="Authorization" type="string" required>
        Bearer Token，格式：`Bearer YOUR_API_KEY`
      </Property>
    </Properties>

    ### 路径参数

    <Properties>
      <Property name="task_id" type="string" required>
        视频任务 ID
      </Property>
    </Properties>

    ### 响应参数

    <Properties>
      <Property name="id" type="string">
        视频任务 ID
      </Property>
      <Property name="object" type="string">
        对象类型，固定为 `video`
      </Property>
      <Property name="model" type="string">
        使用的模型名称
      </Property>
      <Property name="created_at" type="integer">
        创建时间戳
      </Property>
      <Property name="status" type="string">
        任务状态（succeeded: 成功）
      </Property>
      <Property name="progress" type="integer">
        生成进度百分比
      </Property>
      <Property name="url" type="string">
        视频下载链接（完成时）
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup tag="GET" label="/v1/video/generations/{task_id}">

```bash {{ title: 'cURL' }}
curl https://api.omnimaas.com/v1/video/generations/{task_id} \
  -H "Authorization: Bearer YOUR_API_KEY"
```

    </CodeGroup>

    <CodeGroup title="响应示例">

```json {{ title: '响应' }}
{
  "id": "cgt-xxx",
  "object": "video",
  "model": "doubao-seedance-1-0-pro-250528",
  "created_at": 1640995200,
  "status": "succeeded",
  "progress": 100,
  "url": "https://example.com/video.mp4"
}
```

    </CodeGroup>
  </Col>
</Row>

---

## 代码示例

### Python 示例

```python
import requests

url = 'https://api.omnimaas.com/v1/video/generations'

headers = {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer YOUR_API_KEY'
}

data = {
    "model": "doubao-seedance-1-0-pro-250528",
    "prompt": "夕阳下的海滩，海浪轻轻拍打着沙滩"
}

response = requests.post(url, headers=headers, json=data)
result = response.json()
print(f"任务ID: {result['id']}")
print(f"状态: {result['status']}")
```

### Go 示例

```go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io"
    "net/http"
)

type VideoRequest struct {
    Model  string `json:"model"`
    Prompt string `json:"prompt"`
}

func main() {
    reqBody := VideoRequest{
        Model:  "doubao-seedance-1-0-pro-250528",
        Prompt: "夕阳下的海滩，海浪轻轻拍打着沙滩",
    }

    jsonData, _ := json.Marshal(reqBody)
    req, _ := http.NewRequest("POST",
        "https://api.omnimaas.com/v1/video/generations",
        bytes.NewBuffer(jsonData))
    req.Header.Set("Content-Type", "application/json")
    req.Header.Set("Authorization", "Bearer YOUR_API_KEY")

    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()

    body, _ := io.ReadAll(resp.Body)
    fmt.Println(string(body))
}
```

### Node.js 示例

```javascript
const axios = require('axios');

const url = 'https://api.omnimaas.com/v1/video/generations';

const headers = {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer YOUR_API_KEY'
};

const data = {
    model: 'doubao-seedance-1-0-pro-250528',
    prompt: '夕阳下的海滩，海浪轻轻拍打着沙滩'
};

axios.post(url, data, { headers })
    .then(response => {
        console.log('任务ID:', response.data.id);
        console.log('状态:', response.data.status);
    })
    .catch(error => {
        console.error('请求失败:', error.message);
    });
```
